import tweepy

def get_tweets_from_candidates_search_queries(queries, twitter_api):
    all_tweet=[]#liste de tous les tweets initialisée
    try:
        for query in queries:
            tweets = twitter_api.search(query, lang="french", rpp="20")
            for tweet in tweets:
                all_tweets.append(tweet)
    except TweepError as e:
    #on va modifier le message d'erreur selon le code de celle-ci
        if e.response.text in ["429","420"]: #il s'agit d'un problème dû à la limitation du nombre de requêtes par Twitter
            print("we exceeded the twitter rate limit, returning now")
            return all_tweets #on peut renvoyer la liste car l'erreur le permet et la liste est a priori assez remplie
        elif e.response.text =="500":
            print("Twitter down, Twitter down!")
            return None
        elif  e.response.text =="401":
            print("wrong credentials!")
            return None
        elif  e.response.text =="404":
            print("The request <{}> is invalid".format(query))
            return None
        else:
            "twitter API responded with code {}, something is wrong ".format(e.response.text)
            return None

    return all_tweets
